# Meta-CloudSimSFC

Meta-CloudSimSFC is an extension of CloudSimSDN project. Version 2.0 is now availalbe.

## Features:

* Simulation framework for Virtual Network Function(VNF) placement in cloud computing by usint three Metaheuristic   algorithms:

1. SHC-VNFP algorithm

2. SA-VNFP algorithm

3. Mem-VNFP algorithm


## Program DependenciesüìÑ
You can download cloudsim-4.0.jar here (https://github.com/Cloudslab/cloudsimsdn/releases/tag/v2.0.1-beta)
or clone [CloudSim (cloudsim-4.0)] src code (https://github.com/Cloudslab/cloudsim), either include all src code or export the jar of the newest version (bugs fixed to support cloudsimsdn-nfv) and
enter the project's root directory and execute `mvn clean install` to install the jar packages into your local maven repository.

Other dependencies are already included.

## Quick Start‚ö°Ô∏è
After the mvn build, you could simply run the project's example in IDE's Run Configurations by adding commands in the Arguments:


````
* To run StartExperimentMetaSFC:
1 for enable SFC auto-scaling
````
SHC 1 example-sfc/sfc-example-physical.json example-sfc/sfc-example-scale-virtual.json example-sfc/ sfc-example-scale-workload.csv
````

## Package Components
1. org.cloudbus.cloudsim.sdn

  Main components of CloudSimSDN. Core functions are implemented in this package source codes.
  
2. org.cloudbus.cloudsim.example

  Example program. SimpleExample.java is the entry point of the example program. Please follow the code from SimpleExample.java
  This document is to describe the example program.
  Other Scenarios includes:
  Inter cloud data centers, Link Selection Policy, Overbooking Host Resources, QoS, Service Function Chaining, and
  Service Function Chaining in edge computing.
  
3. org.cloudbus.cloudsim.sdn.exmaple.topogenerators

  Example topology generators. Physical / Virtual topology files (inter-clouds, Edge computing, SFC, multi-tier web application, etc.) can be generated by using these generators with customizable parameters. Some distributions can be used within topology generators.
  
4. org.cloudbus.cloudsim.sdn.monitor

  Energy consumption and utilization monitor.
  
5. org.cloudbus.cloudsim.sdn.nos

 Main components of Networking Operation System includes flow channel manager, and extended version of nos for different scenarios. 
  
6. org.cloudbus.cloudsim.sdn.parsers
  
  Parsers for physical topology, virtual topology, and workload.
  
7. org.cloudbus.cloudsim.sdn.physicalcomponents

  SDN-enabled components includes node, link, physical topology, switches (Aggregation, core, edge, gateway, inter-cloud), routing table, extended datacenter, and host.
  
8. org.cloudbus.cloudsim.sdn.policies

  Policies (algorithms) for Host selection, Link selection, Vm allocation, Host overbooking.
  
 9. org.cloudbus.cloudsim.sdn.provisioners
 
  Bandwidth(bw) and CPU(Pe) overbooking provisioners.
  
 10. org.cloudbus.cloudsim.sdn.sfc
 
  Main components of Service Function Chaining (SFC) festures, including SFC Forwarder, SFC policy, auto scaling algorihtms (scaling up and out), etc.
  
 11. org.cloudbus.cloudsim.sdn.virtualcomponents
 
  Flows created in VMs (SDNVM.java) through channel(Channel.java) based on corresponding Flow configuration(FlowConfig.java) are forwarded according to rules(ForwardingRule.java) in SDN-enabled switches. VirtualNetworkMapper includes the main APIs for network traffic forwarding.
  
 12. org.cloudbus.cloudsim.sdn.workload
 
  Core components for workload processing and networking transmission. Request.java represents the message submitted to VM that includes a list of activities(Activity.java) that should be performed at the VM (Processing and Transmission). Furthermore, in some senarios, one request could include another request for the subsequent requests which will be performed at the other VMs.
  
## Input Data
We need to submit three input files to CloudSimSDN: data center configuration (physical topology), resource deployment request (virtual topology), and workloads for VMs.

### Physical topology (Data center configuration)
Configurations of physical hosts, switches and links that consist of SDN-enabled cloud data center. This can input as JSON file.  Please look at sdn-example-physical.json file. 
In this example, data center is configured to operate 100 hosts, 10 edge switches connecting 10 hosts each, and one core switch that connects all edge switches.

* Host nodes
  1. type: "host"
  2. name: name of the host
  3. pes, mips, ram, storage : the host specification
  4. bw: connection bandwidth with the edge switch

* Switch nodes
  1. type: either "core", "aggregate" or "edge"
  2. name: name of the switch
  3. bw: maximum bandwidth support by switch

* Links
  1. source: the name of source node
  2. destination: the name of destination node

###Virtual topology (Resource deployment request)
When customers send VM creation requests to the cloud data center, they provide virtual topology for their network QoS and SLA. Virtual topology consists of VM types and virtual links between VMs. This can input as JSON file. Please look at sdn-example-virtual.json file.

The resource deployment file includes 500 VM creation requests in which three to five VMs are grouped in a same virtual network to communicate with each other. 

* Nodes
  1. type: "vm"
  2. name: name of the vm
  3. pes, mips, ram, size: the VM specification
* Links
  1. name: the name of the link that can be used in workloads. For default link, use "default"
  2. source: the name of source VM
  3. destination: the name of destination VM
  4. bandwidth (optional): specifically requested bandwidth for the link

###Workloads (workload.csv)
After VMs are created in the data center, computation and network transmission workloads from end-users are passed to VMs to be processed. A workload consists of compute processing and network transmission. This can input as CSV file.
Please look at `sdn-example-workload-*.csv` files

Workload file has a long packet transmission between VMs in a same virtual network. Since we should measure power consumption of switches, data transmissions between VMs are necessary to let switches work for the experiment time. To make the experiment simple, we make VMs use network bandwidth in full during their lifetime, so that just one long packet transmission workload for each VM is given in the workload file.

* CSV file structure
  1. Submission time
  2. Submission VM (VM1)
  3. Packet size of the transmission to VM1 (use 0)
  4. Computational workload for VM1
  5. The name of virtual link to transfer packet to the next VM (VM2)
  6. The next VM (VM2)
  7. Packet size of the transmission to VM2
  8. Computational workload for VM2
  9. ... (repeat v ~ viii)



